<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ArrayObject &mdash; PHP SPL Iterators 1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="PHP SPL Iterators 1 documentation" href="../index.html" />
    <link rel="next" title="ArrayIterator class" href="array-iterator.html" />
    <link rel="prev" title="Extended Iterator interfaces" href="extends-iter.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="array-iterator.html" title="ArrayIterator class"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="extends-iter.html" title="Extended Iterator interfaces"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PHP SPL Iterators 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">ArrayObject</a><ul>
<li><a class="reference internal" href="#arrayobject-usage">ArrayObject Usage</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="extends-iter.html"
                        title="previous chapter">Extended Iterator interfaces</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="array-iterator.html"
                        title="next chapter">ArrayIterator class</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/notes/array-object.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="arrayobject">
<span id="id1"></span><h1>ArrayObject<a class="headerlink" href="#arrayobject" title="Permalink to this headline">¶</a></h1>
<p>An <code class="docutils literal"><span class="pre">ArrayObject</span></code> allows us to treat a class like it were also an array, allowing us to access its properties using array syntax. ArrayObject implements <code class="docutils literal"><span class="pre">IteratorAggregate</span></code>,
<code class="docutils literal"><span class="pre">ArrayAccess</span></code>, <code class="docutils literal"><span class="pre">Serializable</span></code>, and <code class="docutils literal"><span class="pre">Countable</span></code>. It also implements a number of its own member functions:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">ArrayObject</span> <span class="kd">implements</span> <span class="n">IteratorAggregate</span> <span class="o">,</span> <span class="n">ArrayAccess</span> <span class="o">,</span> <span class="n">Serializable</span> <span class="o">,</span> <span class="n">Countable</span> <span class="o">{</span>

    <span class="cm">/* Constants */</span>
    <span class="kd">const</span> <span class="n">integer</span> <span class="n">STD_PROP_LIST</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">;</span>
    <span class="kd">const</span> <span class="n">integer</span> <span class="n">ARRAY_AS_PROPS</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">;</span>
    <span class="cm">/* Methods */</span>
    <span class="kd">public</span> <span class="nf">__construct</span> <span class="o">([</span> <span class="n">mixed</span> <span class="n">$input</span> <span class="o">=</span> <span class="o">[]</span> <span class="o">[,</span> <span class="kt">int</span> <span class="n">$flags</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">[,</span> <span class="n">string</span> <span class="n">$iterator_class</span> <span class="o">=</span> <span class="s">&quot;ArrayIterator&quot;</span> <span class="o">]]]</span> <span class="o">)</span>

    <span class="c1">// ArrayAccess methods</span>
    <span class="kd">public</span> <span class="n">bool</span> <span class="nf">offsetExists</span> <span class="o">(</span> <span class="n">mixed</span> <span class="n">$index</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="n">mixed</span> <span class="nf">offsetGet</span> <span class="o">(</span> <span class="n">mixed</span> <span class="n">$index</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">offsetSet</span> <span class="o">(</span> <span class="n">mixed</span> <span class="n">$index</span> <span class="o">,</span> <span class="n">mixed</span> <span class="n">$newval</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">offsetUnset</span> <span class="o">(</span> <span class="n">mixed</span> <span class="n">$index</span> <span class="o">)</span>

    <span class="c1">// IteratorAggregate methods</span>
    <span class="kd">public</span> <span class="n">ArrayIterator</span> <span class="nf">getIterator</span> <span class="o">(</span> <span class="kt">void</span> <span class="o">)</span>

    <span class="c1">// Serializable methods</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">unserialize</span> <span class="o">(</span> <span class="n">string</span> <span class="n">$serialized</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="n">string</span> <span class="nf">serialize</span> <span class="o">(</span> <span class="kt">void</span> <span class="o">)</span>

    <span class="c1">// Countable method</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">count</span> <span class="o">(</span> <span class="kt">void</span> <span class="o">)</span>

    <span class="c1">// other public methods</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">append</span> <span class="o">(</span> <span class="n">mixed</span> <span class="n">$value</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">asort</span> <span class="o">(</span> <span class="kt">void</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="n">array</span> <span class="nf">exchangeArray</span> <span class="o">(</span> <span class="n">mixed</span> <span class="n">$input</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="n">array</span> <span class="nf">getArrayCopy</span> <span class="o">(</span> <span class="kt">void</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getFlags</span> <span class="o">(</span> <span class="kt">void</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="n">string</span> <span class="nf">getIteratorClass</span> <span class="o">(</span> <span class="kt">void</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">ksort</span> <span class="o">(</span> <span class="kt">void</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">natcasesort</span> <span class="o">(</span> <span class="kt">void</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">natsort</span> <span class="o">(</span> <span class="kt">void</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">uasort</span> <span class="o">(</span> <span class="n">callable</span> <span class="n">$cmp_function</span> <span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">uksort</span> <span class="o">(</span> <span class="n">callable</span> <span class="n">$cmp_function</span> <span class="o">)</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFlags</span> <span class="o">(</span> <span class="kt">int</span> <span class="n">$flags</span> <span class="o">)</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setIteratorClass</span> <span class="o">(</span> <span class="n">string</span> <span class="n">$iterator_class</span> <span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">ArrayObject::getIterator()</span></code> will return an <code class="docutils literal"><span class="pre">ArrayIterator</span></code>. If you extend <code class="docutils literal"><span class="pre">ArrayObject</span></code>, you can return your own iterator type, but it must derive
from <code class="docutils literal"><span class="pre">ArrayIterator</span></code>.</p>
<div class="section" id="arrayobject-usage">
<h2>ArrayObject Usage<a class="headerlink" href="#arrayobject-usage" title="Permalink to this headline">¶</a></h2>
<p>ArrayObject lets you treat an object like an array: it allows you to access its access properties using array syntax, and it allows iterating them via foreach. When you
create an ArrayObject from an associative array, the objects properties take on the name of the keys of the array.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="nx">data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s2">&quot;name&quot;</span>  <span class="o">=&gt;</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;email&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;john@domain.com&quot;</span>
<span class="p">);</span>

<span class="nv">$arrayObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArrayObject</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
<span class="c1">// access the object properties using an array notation</span>
<span class="k">echo</span> <span class="s2">&quot;Name is &quot;</span> <span class="o">.</span> <span class="nv">$arrayObj</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">.</span> <span class="s2">&quot;. Email is &quot;</span> <span class="o">.</span> <span class="nv">$arrayObj</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">];</span>
</pre></div>
</div>
<p>We can use ArrayObject with nested arrays:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
 <span class="nv">$company</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
              <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chuck Norris&#39;</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Account Manager&#39;</span><span class="p">,</span>
              <span class="s1">&#39;manages&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                                 <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Jane Doe&#39;</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Project Manager&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;manages&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                                                          <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Cinderella&#39;</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Developer&#39;</span><span class="p">,</span>
                                                          <span class="s1">&#39;manages&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
                                                    <span class="p">),</span>
                                                    <span class="k">array</span><span class="p">(</span>
                                                          <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Shrek&#39;</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Graphical Designer&#39;</span><span class="p">,</span>
                                                          <span class="s1">&#39;manages&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
                                                    <span class="p">)</span>
                                               <span class="p">),</span>
                                               <span class="k">array</span><span class="p">(</span>
                                                  <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Project Manager&#39;</span><span class="p">,</span>
                                                   <span class="s1">&#39;manages&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
                                               <span class="p">)</span>
                           <span class="p">)</span>
             <span class="p">);</span>

   <span class="nv">$iterator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RecursiveArrayIterator</span><span class="p">(</span><span class="k">new</span> <span class="nx">ArrayObject</span><span class="p">(</span><span class="nv">$company</span><span class="p">));</span>

   <span class="nv">$riteriter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RecursiveIteratorIterator</span><span class="p">(</span><span class="nv">$iterator</span><span class="p">);</span>

   <span class="k">foreach</span> <span class="p">(</span><span class="nv">$riteriter</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>

         <span class="k">echo</span> <span class="nv">$key</span> <span class="o">.</span> <span class="s2">&quot; = &quot;</span> <span class="o">.</span> <span class="nv">$value</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
   <span class="p">}</span>
</pre></div>
</div>
<p>You can also pass an object to the constructor, and it will create properties identical to the names of the properties of the object—provided they are public.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">EmailUser</span> <span class="p">{</span>
     <span class="k">public</span> <span class="nv">$name</span><span class="p">;</span>
     <span class="k">public</span> <span class="nv">$email</span><span class="p">;</span>
     <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">email</span> <span class="o">=</span> <span class="nv">$email</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EmailUser</span><span class="p">(</span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span> <span class="s2">&quot;john@domain.com&quot;</span><span class="p">);</span>

<span class="c1">// create an instance of the ArrayObject class</span>
<span class="nv">$arrayObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArrayObject</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span>

<span class="c1">// access the object properties using an array notation</span>
<span class="c1">// displays the following: Full name: John Doe Email: john@domain.com</span>
<span class="k">echo</span> <span class="s2">&quot;Full name: &quot;</span> <span class="o">.</span> <span class="nv">$arrayObj</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="s2">&quot; Email: &quot;</span> <span class="o">.</span> <span class="nv">$arrayObj</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">];</span>

<span class="c1">// count the number of properties in the object</span>
<span class="k">echo</span> <span class="s2">&quot;total properties is &quot;</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$arrayObj</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">new</span> <span class="pre">ArrayObject($data)</span></code> is equivalent to <code class="docutils literal"><span class="pre">new</span> <span class="pre">ArrayObject($data,</span> <span class="pre">ArrayObject::STD_PROP_LIST)</span></code> because <code class="docutils literal"><span class="pre">STD_PROP_LIST</span></code> is the default behavior.
A good way to understand the usefulness ArrayObject is to compare it to the <code class="docutils literal"><span class="pre">SimpleXML</span></code> extension. <code class="docutils literal"><span class="pre">SimpleXML</span></code> objects are a type of <code class="docutils literal"><span class="pre">ArrayObject</span></code> in that a SimpleXML object
also acts like an array which makes it efficient to use because you can just <strong>foreach</strong> or access one of the elements within the list. You don not have to grab an
array from the object and then iterate over and do something else with it if you want the tag name or an attribute.</p>
<p>When the constant <code class="docutils literal"><span class="pre">ArrayObject::ARRAY_AS_PROPS</span></code> is passed to the constructor or to the <code class="docutils literal"><span class="pre">setFlags()</span></code> method, it’s possible to handle the properties by means of an
object syntax. For example</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
 <span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
     <span class="nx">‘name’</span>  <span class="o">=&gt;</span> <span class="nx">‘John</span> <span class="nx">Doe’</span><span class="p">,</span>
     <span class="nx">‘email’</span> <span class="o">=&gt;</span> <span class="nx">‘john</span><span class="o">@</span><span class="nx">domain</span><span class="o">.</span><span class="nx">com’</span>
 <span class="p">);</span>

 <span class="c1">// create an instance of the ArrayObject class</span>
 <span class="nv">$arrayObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArrayObject</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nx">ArrayObject</span><span class="o">::</span><span class="na">ARRAY_AS_PROPS</span><span class="p">);</span>

 <span class="c1">// access the object properties using an object notation</span>
 <span class="c1">// displays the following: Full name: John Doe Email: john@domain.com</span>
 <span class="k">echo</span> <span class="nx">‘Full</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">‘</span> <span class="o">.</span> <span class="nv">$arrayObj</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">.</span> <span class="nx">‘</span> <span class="nx">Email</span><span class="o">:</span> <span class="nx">‘</span> <span class="o">.</span> <span class="nv">$arrayObj</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">;</span>

 <span class="c1">// count the number of properties in the object</span>
 <span class="k">echo</span> <span class="nx">‘Number</span> <span class="nx">of</span> <span class="nx">properties</span> <span class="nx">assigned</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">object</span><span class="o">:</span> <span class="nx">‘</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$arrayObj</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">ArrayObject</span></code> can be extended and its methods overriden, so that something specific is first done before forwarding the call to the parent:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
  <span class="k">class</span> <span class="nc">MyArrayObject</span> <span class="k">extends</span> <span class="nx">ArrayObject</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">append</span><span class="p">(</span><span class="nx">mixed</span> <span class="nv">$value</span><span class="p">)</span>
    <span class="p">{</span>
          <span class="c1">//Do something to $value first</span>
          <span class="c1">//...snip</span>
          <span class="k">parent</span><span class="o">::</span><span class="na">append</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
</pre></div>
</div>
<p><strong>Note:</strong> Since <code class="docutils literal"><span class="pre">ArrayObject</span></code> simply implements <code class="docutils literal"><span class="pre">ArrayAccess</span></code> and adds some additional methods, we can use an ArrayObject like an array, which this is its stated purpose, anyway.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="array-iterator.html" title="ArrayIterator class"
             >next</a> |</li>
        <li class="right" >
          <a href="extends-iter.html" title="Extended Iterator interfaces"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PHP SPL Iterators 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Kurt Krueckeberg.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>